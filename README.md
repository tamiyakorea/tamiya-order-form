# ğŸ‡°ğŸ‡· Tamiya Order Form

í•œêµ­íƒ€ë¯¸ì•¼ ì£¼ë¬¸Â·ë°°ì†¡Â·A/S í†µí•© ê´€ë¦¬ ì‹œìŠ¤í…œ

ë³¸ í”„ë¡œì íŠ¸ëŠ” í•œêµ­íƒ€ë¯¸ì•¼ì˜ ê³ ê° ì£¼ë¬¸, ë°œì£¼, ë°°ì†¡, A/S ì²˜ë¦¬ê¹Œì§€ ì „ ê³¼ì •ì„ ì›¹ì—ì„œ í†µí•© ê´€ë¦¬í•˜ê¸° ìœ„í•´ ê°œë°œëœ **Supabase ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜**ì…ë‹ˆë‹¤. ê³ ê°ê³¼ ê´€ë¦¬ì ëª¨ë‘ë¥¼ ìœ„í•œ ì§ê´€ì ì¸ UIì™€, ì‹¤ì‹œê°„ ë°ì´í„° ì €ì¥Â·ì²˜ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---

## ğŸŒ ë°°í¬ ì£¼ì†Œ

- **ê³ ê°ìš© ì£¼ë¬¸ í˜ì´ì§€**: [https://order.kidult-hobby.co.kr](https://order.kidult-hobby.co.kr)
- **ê´€ë¦¬ì í˜ì´ì§€**: [https://order.kidult-hobby.co.kr/admin/orders.html](https://order.kidult-hobby.co.kr/admin/orders.html) *(ì¸ì¦ í•„ìš”)*

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### ê³ ê°
- íƒ€ë¯¸ì•¼/ì‚°ì™€ ì œí’ˆ ì£¼ë¬¸ ë° A/S ì‹ ì²­
- ì£¼ë¬¸ ì¡°íšŒ ë° ì…ê¸ˆ ìƒíƒœ í™•ì¸
- íŒŒì¼ ì—…ë¡œë“œ ë° í˜„ê¸ˆì˜ìˆ˜ì¦ ì •ë³´ ì…ë ¥
- FAQ ë° ì•½ê´€ ë™ì˜ ì ˆì°¨ ì œê³µ

### ê´€ë¦¬ì
- ì£¼ë¬¸ ê´€ë¦¬: ì£¼ë¬¸ ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ, ì…ê¸ˆ í™•ì¸
- ë°œì£¼ ê´€ë¦¬: ì…ê¸ˆëœ ì£¼ë¬¸ ìë™ ì´ë™
- ë°°ì†¡ ê´€ë¦¬: ì†¡ì¥ ë“±ë¡, ë°°ì†¡ ì™„ë£Œ ì²˜ë¦¬, í•©ë°°ì†¡, í™˜ë¶ˆ ê´€ë¦¬
- A/S ê´€ë¦¬: ìˆ˜ë¦¬ì ‘ìˆ˜, ì²­êµ¬ë¹„ìš©, ìˆ˜ë¦¬ ì™„ë£Œ ì²˜ë¦¬
- ìƒí’ˆ ê´€ë¦¬: ìƒí’ˆ ë‹¨ê°€ ì¼ê´„ ì—…ë¡œë“œ ë° ìˆ˜ì •
- í†µê³„ ë¶„ì„: ê³ ê°ë³„ ì£¼ë¬¸ ë¶„ì„, ë°°ì†¡ ì†Œìš”ì¼, í’ˆëª©ë³„ ë§¤ì¶œ ì§‘ê³„

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜ | ê¸°ìˆ  |
|------|------|
| **Frontend** | HTML, CSS, JavaScript (Vanilla) |
| **Backend** | [Supabase](https://supabase.com/) |
| **Storage** | Supabase Storage (íŒŒì¼ ì—…ë¡œë“œ) |
| **Auth** | Supabase Authentication |
| **PDF/Excel ì²˜ë¦¬** | [pdfmake](https://pdfmake.github.io/), [SheetJS](https://sheetjs.com/) |
| **ë°°í¬** | Cloudflare Pages, Supabase Edge Functions |

---

## ğŸ“ ë””ë ‰í„°ë¦¬ êµ¬ì¡°

tamiyakorea/tamiya-order-form/
â”œâ”€â”€ index.html # ê³ ê° ì£¼ë¬¸ í˜ì´ì§€

â”œâ”€â”€ as-order.html # A/S ì‹ ì²­ í˜ì´ì§€

â”œâ”€â”€ admin/

â”‚ â”œâ”€â”€ orders.html # ê´€ë¦¬ì ì£¼ë¬¸ ê´€ë¦¬

â”‚ â”œâ”€â”€ shipping.html # ë°°ì†¡ ì²˜ë¦¬

â”‚ â”œâ”€â”€ shipped.html # ë°°ì†¡ ì™„ë£Œ

â”‚ â”œâ”€â”€ accounting.html # íšŒê³„ ê´€ë¦¬

â”‚ â”œâ”€â”€ as-progress.html # A/S ìˆ˜ë¦¬ ì§„í–‰

â”‚ â””â”€â”€ as-charge.html # A/S ì²­êµ¬ ê´€ë¦¬

â”œâ”€â”€ items.html # ìƒí’ˆ DB ê´€ë¦¬

â”œâ”€â”€ order-stats.html # í†µê³„ ëŒ€ì‹œë³´ë“œ

â””â”€â”€ supabase/functions/ # Edge Functions

---

## ğŸ“„ Supabase í…Œì´ë¸” êµ¬ì¡° ìš”ì•½

### `orders`
| í•„ë“œ | ì„¤ëª… |
|------|------|
| `order_id` | ì£¼ë¬¸ë²ˆí˜¸ |
| `items` | ì£¼ë¬¸ ìƒí’ˆ ëª©ë¡(JSON) |
| `payment_status` | `ì…ê¸ˆëŒ€ê¸°`, `ì…ê¸ˆí™•ì¸` |
| `shipping_status` | ì£¼ë¬¸ ìƒíƒœ íë¦„ |
| `payment_date` | ì…ê¸ˆ í™•ì¸ì¼ |
| `created_at` | ì£¼ë¬¸ì¼ì‹œ |
| ê¸°íƒ€ ì£¼ì†Œ, ì—°ë½ì²˜, ë¹„ê³  ë“± í¬í•¨ |

### `tamiya_items`
| í•„ë“œ | ì„¤ëª… |
|------|------|
| `item_code` | ì œí’ˆ ì½”ë“œ (PK) |
| `description`, `price`, `j_retail` | ì œí’ˆëª…, ë‹¨ê°€ |
| `order_unit_pck` | ìµœì†Œ ì£¼ë¬¸ ìˆ˜ëŸ‰ |
| `hide_from_customer_search` | ê²€ìƒ‰ ì œì™¸ ì—¬ë¶€ |

### `as_orders`
| í•„ë“œ | ì„¤ëª… |
|------|------|
| `name`, `phone`, `product_name`, `symptom` | ê³ ê°/ì œí’ˆ ì •ë³´ |
| `status` | `ì ‘ìˆ˜ëŒ€ê¸°`, `ìˆ˜ë¦¬ì§„í–‰`, `ì²­êµ¬ê´€ë¦¬`, `ì²˜ë¦¬ì™„ë£Œ` |
| `status_updated_at` | ìƒíƒœ ë³€ê²½ì¼ |
| `repair_cost`, `shipping_invoice`, `receipt_code` ë“± |

---

## âš™ï¸ Supabase Edge Function ì‚¬ìš©ë²•

### ì£¼ìš” í•¨ìˆ˜

| í•¨ìˆ˜ëª… | ì„¤ëª… |
|--------|------|
| `get-product-by-code` | ì œí’ˆ ì½”ë“œë¡œ ìƒí’ˆ ì •ë³´ ì¡°íšŒ |
| `create-order` | ì£¼ë¬¸ ìƒì„± |
| `upload-proof` | ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ |
| `get-order-by-id` | ì£¼ë¬¸ë²ˆí˜¸ë¡œ ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ |

### ë¡œì»¬ ì‹¤í–‰ / ë°°í¬

```bash
# Supabase CLI ë¡œê·¸ì¸ ë° ì´ˆê¸°í™”
npx supabase login
npx supabase init

# í•¨ìˆ˜ ë¡œì»¬ ì‹¤í–‰
npx supabase functions serve get-product-by-code

# í•¨ìˆ˜ ë°°í¬
npx supabase functions deploy get-product-by-code

ë¡œì»¬ ê°œë°œ ë° í…ŒìŠ¤íŠ¸
í•„ìˆ˜ ì„¤ì¹˜
Node.js + npm

Supabase CLI

Live Server (VS Code í™•ì¥)

í…ŒìŠ¤íŠ¸ ì ˆì°¨
bash
ì½”ë“œ ë³µì‚¬
# Supabase í”„ë¡œì íŠ¸ ë¡œì»¬ ì‹¤í–‰
npx supabase start

# Live Server ë“±ìœ¼ë¡œ index.html í…ŒìŠ¤íŠ¸
.env ë˜ëŠ” supabase.jsì— URL ë° ìµëª… í‚¤ í•„ìš”

ë¡œì»¬ Edge Functionì€ http://localhost:54321/functions/v1/... ìœ¼ë¡œ í˜¸ì¶œë¨


ğŸ” Supabase ì¸ì¦ ë° RLS ì •ì±…
1. Supabase Auth ì‚¬ìš©
ê´€ë¦¬ì í˜ì´ì§€ëŠ” supabase.auth.getUser()ë¡œ ë¡œê·¸ì¸ í™•ì¸

supabase.auth.signInWithPassword()ë¡œ ë¡œê·¸ì¸ êµ¬í˜„

ë¡œê·¸ì¸ í›„ localStorageì— ì„¸ì…˜ ì €ì¥

2. RLS ì„¤ì • ì˜ˆì‹œ
sql
ì½”ë“œ ë³µì‚¬
-- orders í…Œì´ë¸” RLS ì •ì±… ì˜ˆì‹œ
create policy "Allow read for authenticated users"
on orders for select
using (auth.role() = 'authenticated');
ê´€ë¦¬ì ì „ìš© ê¶Œí•œì€ role = 'admin' ê¸°ë°˜ìœ¼ë¡œ ì„¤ì • ê°€ëŠ¥

as_orders, tamiya_items ë“± í…Œì´ë¸”ë„ ë™ì¼í•œ ë°©ì‹ ì ìš©

ì£¼ì˜: anon í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì ‘ê·¼ ì‹œ RLS ì •ì±…ì— ë”°ë¼ ë°ì´í„° ì ‘ê·¼ ì—¬ë¶€ê°€ ê²°ì •ë©ë‹ˆë‹¤.

ğŸ“œ ë¼ì´ì„ ìŠ¤
ë³¸ í”„ë¡œì íŠ¸ëŠ” í•œêµ­íƒ€ë¯¸ì•¼ ì‚¬ë‚´ ìš´ì˜ ëª©ì ì˜ ì „ìš© ì‹œìŠ¤í…œìœ¼ë¡œ, ì™¸ë¶€ ê³µê°œìš© ë¼ì´ì„ ìŠ¤ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ğŸ“¬ ë¬¸ì˜
Email: trade@tamiya.co.kr
