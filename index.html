<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>한국타미야 개별주문 신청</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    h2 { border-bottom: 2px solid #333; padding-bottom: 5px; }
    .section { margin-bottom: 30px; }
    label { display: block; margin: 8px 0 4px; }
    input[type="text"], input[type="email"] { width: 100%; padding: 8px; margin-bottom: 10px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background-color: #f2f2f2; }
    .total { font-weight: bold; }
    button { padding: 8px 16px; margin-top: 20px; cursor: pointer; }
  </style>
</head>
<body>

  <h1>한국타미야 개별주문 신청</h1>

  <div class="section">
    <h2>신청 전 고객 안내사항</h2>
    <p>※ 부품 주문은 국내에서 유통 중인 제품에 한해 가능합니다.<br>
    ※ 주문 후 취소는 불가능합니다.<br>
    ※ 부품은 소요 기간이 있으니 여유있게 신청 바랍니다.</p>
  </div>

  <div class="section">
    <h2>신청 구분</h2>
    <label><input type="checkbox" name="userType" value="consumer"> 개인 소비자</label>
    <label><input type="checkbox" name="userType" value="dealer"> 한국 타미야 도·소매 업체</label>
  </div>

 
  <div class="section">
    <h2>고객 정보 입력</h2>
    <label for="customerName">고객 성명</label>
    <input type="text" id="customerName" placeholder="홍길동">

    <label for="phoneNumber">전화번호</label>
    <input type="text" id="phoneNumber" placeholder="010-1234-5678">

    <label for="zipcode">우편번호</label>
    <input type="text" id="zipcode" placeholder="우편번호">

    <label for="address">주소</label>
    <input type="text" id="address" placeholder="도로명 주소">

    <label for="email">안내받을 이메일 (필수)</label>
    <input type="email" id="email" required placeholder="example@example.com">

    <label>
      <input type="checkbox" id="receiptRequested" onchange="toggleCashReceipt()"> 현금영수증 신청
    </label>

    <div id="cashReceiptSection" style="display: none; margin-top: 10px;">
      <label for="receiptInfo">현금영수증 정보 (휴대폰 번호 또는 사업자번호)</label>
      <input type="text" id="receiptInfo" placeholder="01012345678 또는 1234567890">
    </div>
  </div>
</div>

  <script>
    function toggleCashReceipt() {
      const checkbox = document.getElementById("receiptRequested");
      const section = document.getElementById("cashReceiptSection");
      section.style.display = checkbox.checked ? "block" : "none";
    }
  </script>
  <div class="section">
    <h2>&lt;필독&gt; 입금 안내 및 주의사항</h2>
    <p>※ 입금 계좌는 주문 확정 시 제공됩니다.<br>
    ※ 동일 제품도 부품번호가 다를 수 있으니, 반드시 정확한 시리얼 넘버를 입력해주세요.<br>
    ※ 가격은 부가세 포함 소비자 기준입니다.</p>
  </div>

  <div class="section">
    <h2>제품 검색 및 신청</h2>
    <label for="serialSearch">제품 시리얼 넘버 입력</label>
    <input type="text" id="serialSearch" placeholder="예: 12345" />
    <button onclick="searchProduct()">검색</button>

    <div id="searchResult" style="margin-top: 10px;"></div>

    <table id="orderTable" style="display: none;">
      <thead>
        <tr>
          <th>시리얼 넘버</th>
          <th>제품명</th>
          <th>수량</th>
          <th>단가 (₩)</th>
          <th>합계 (₩)</th>
          <th>삭제</th>
        </tr>
      </thead>
      <tbody id="orderItems"></tbody>
      <tfoot>
        <tr class="total">
          <td colspan="2">총합</td>
          <td id="totalQty">0</td>
          <td></td>
          <td id="totalPrice">0</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>

  <button onclick="confirmOrder()">주문 확정</button>

  <script>
    const mockDatabase = {
      "12345": { name: "RC 스피드 기어 세트", price: 18000 },
      "54321": { name: "미니 4WD 모터", price: 7500 },
      "67890": { name: "서보 마운트 브래킷", price: 9500 }
    };

    let orderList = [];

    function searchProduct() {
      const serial = document.getElementById("serialSearch").value.trim();
      const resultArea = document.getElementById("searchResult");

      if (mockDatabase[serial]) {
        const product = mockDatabase[serial];
        const existing = orderList.find(item => item.serial === serial);
        if (existing) {
          existing.qty += 1;
        } else {
          orderList.push({ serial, name: product.name, price: product.price, qty: 1 });
        }
        renderOrderTable();
        resultArea.textContent = `${serial} - ${product.name} (₩${product.price.toLocaleString()})가 추가되었습니다.`;
      } else {
        resultArea.textContent = "일치하는 제품이 없습니다.";
      }

      document.getElementById("serialSearch").value = "";
    }

    function renderOrderTable() {
      const tbody = document.getElementById("orderItems");
      const table = document.getElementById("orderTable");
      tbody.innerHTML = "";

      let totalQty = 0;
      let totalPrice = 0;

      orderList.forEach((item, index) => {
        const subtotal = item.qty * item.price;
        totalQty += item.qty;
        totalPrice += subtotal;

        const row = `
          <tr>
            <td>${item.serial}</td>
            <td>${item.name}</td>
            <td>${item.qty}</td>
            <td>${item.price.toLocaleString()}</td>
            <td>${subtotal.toLocaleString()}</td>
            <td><button onclick="removeItem(${index})">삭제</button></td>
          </tr>
        `;
        tbody.innerHTML += row;
      });

      document.getElementById("totalQty").textContent = totalQty;
      document.getElementById("totalPrice").textContent = totalPrice.toLocaleString();
      table.style.display = orderList.length ? "table" : "none";
    }

    function removeItem(index) {
      if (confirm("이 아이템을 목록에서 삭제하시겠습니까?")) {
        orderList.splice(index, 1);
        renderOrderTable();
      }
    }

    function confirmOrder() {
      const email = document.getElementById("email").value.trim();
      if (!email) {
        alert("이메일을 입력해주세요.");
        return;
      }

      if (orderList.length === 0) {
        alert("주문할 제품을 추가해주세요.");
        return;
      }

      // 실제로는 서버로 전송되거나, 다음 페이지로 이동
      window.location.href = "payment-info.html"; // 입금안내 페이지로 연결
    }
  </script>

</body>
</html>
