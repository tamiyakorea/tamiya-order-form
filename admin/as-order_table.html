<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>SANWA A/S ê´€ë¦¬</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link rel="stylesheet" href="orders.css" />
  <link rel="icon" href="data:,">
</head>
<body>
  <nav>
    <a href="orders.html">TAMIYA ì£¼ë¬¸ ê´€ë¦¬</a>
    <a href="ordered.html">TAMIYA ë°œì£¼ ì™„ë£Œ</a>
    <a href="shipping.html">TAMIYA ë°°ì†¡ ê´€ë¦¬</a>
    <a href="shipped.html">TAMIYA ë°°ì†¡ ì™„ë£Œ</a>
    <a href="accounting.html">TAMIYA íšŒê³„ ê´€ë¦¬</a>
    <a href="as-order_table.html" class="active">SANWA A/S ì‹ ì²­ ê´€ë¦¬</a>
    <a href="as-progress.html">SANWA A/S ì§„í–‰ ê´€ë¦¬</a>
    <a href="as-charge.html">SANWA A/S ì²­êµ¬ ê´€ë¦¬</a>
    <a href="as-completed.html">SANWA A/S ì²˜ë¦¬ ì™„ë£Œ</a>
    <a href="as-accounting.html">SANWA A/S íšŒê³„ ê´€ë¦¬</a>
  </nav>

  <h1>SANWA A/S ì‹ ì²­ ê´€ë¦¬</h1>

  <div style="margin: 20px 0; text-align: center;">
    <input id="searchInput" type="text" placeholder="ì‹ ì²­ë²ˆí˜¸ ë˜ëŠ” ê³ ê°ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" style="padding: 6px; width: 300px;" />
    <button onclick="searchOrders()" style="padding: 6px 12px;">ê²€ìƒ‰</button>
    <button onclick="loadOrders()" style="padding: 6px 12px;">ì „ì²´ë³´ê¸°</button>
  </div>

  <div class="button-group" style="display: flex; justify-content: flex-end; gap: 10px; margin: -10px 30px 20px 0;">
    <button onclick="openEditModal()" style="padding: 6px 12px;">ì„ íƒ ìˆ˜ì •</button>
    <button class="btn-excel" onclick="downloadSelectedOrders()">ì„ íƒ í•­ëª© ë‹¤ìš´ë¡œë“œ</button>
    <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
  </div>

  <div class="table-wrapper">
    <table id="orderTable">
      <thead>
      <tr>
        <th><input type="checkbox" id="selectAll" onclick="toggleAllCheckboxes(this)" /></th>
        <th>ì‚­ì œ</th>
        <th>ì‹ ì²­ì¼ì‹œ</th>
        <th>ì‹ ì²­ë²ˆí˜¸</th>
        <th>ê³ ê°ëª…</th>
        <th>ì—°ë½ì²˜</th>
        <th>ì´ë©”ì¼</th>
        <th>ì œí’ˆë¶„ë¥˜</th>
        <th>ì œí’ˆëª…</th>
        <th>ê³ ì¥ì‹œê¸°</th>
        <th>ê³ ì¥ì¦ìƒ</th>
        <th>ìš”ì²­ì‚¬í•­</th>
        <th>ìƒíƒœ</th>
      </tr>
    </thead>
      <tbody id="orderBody">
        <tr><td colspan="12">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
      </tbody>
    </table>
  </div>

<!-- âœ… ëª¨ë‹¬ì°½ -->
<div id="modal" style="display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.4);">
  <div style="background:white; margin:10% auto; padding:20px; width:400px; border-radius:10px;">
    <h3 id="modal-title" style="margin-top:0;">ì œëª©</h3>
    <p id="modal-content" style="white-space:pre-wrap; font-size:14px;"></p>
    <div style="text-align:right;">
      <button id="modal-close">ë‹«ê¸°</button>
    </div>
  </div>
</div>

<div id="editModal" class="modal">
  <div class="modal-content">
    <h3>ì£¼ë¬¸ ì •ë³´ ìˆ˜ì •</h3>
    <input type="hidden" id="editOrderId" />
    <label>ì´ë¦„: <input type="text" id="editName" /></label>
    <label>ì—°ë½ì²˜: <input type="text" id="editPhone" /></label>
    <label>ì´ë©”ì¼: <input type="text" id="editEmail" /></label>
    <label>ì œí’ˆë¶„ë¥˜: <input type="text" id="editCategory" /></label>
    <label>ì œí’ˆëª…: <input type="text" id="editModel" /></label>
    <label>ê³ ì¥ì‹œê¸°: <input type="text" id="editFaultDate" /></label>
    <label>ê³ ì¥ì¦ìƒ: <textarea id="editFaultDesc"></textarea></label>
    <label>ìš”ì²­ì‚¬í•­: <textarea id="editRequest"></textarea></label>
    <div style="margin-top: 10px; text-align:right;">
      <button onclick="saveEdit()">ì €ì¥</button>
      <button onclick="closeEditModal()">ë‹«ê¸°</button>
    </div>
  </div>
</div>


<style>
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);

  /* ğŸ”¥ ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•´ ì¶”ê°€ */
  display: flex;
  justify-content: center;
  align-items: center;
}

.modal-content {
  background: white;
  padding: 20px;
  width: 500px;
  max-height: 80vh;
  overflow-y: auto;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.modal-content label {
  display: block;
  margin-bottom: 10px;
  font-weight: bold;
}

.modal-content input[type="text"],
.modal-content textarea {
  width: 100%;
  box-sizing: border-box;
  padding: 6px;
  margin-top: 4px;
  margin-bottom: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
}
</style>

<script>
window.showModal = function(title, content) {
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modal-title');
  const modalContent = document.getElementById('modal-content');

  modalTitle.textContent = title;
  modalContent.textContent = content;
  modal.style.display = 'block';
};

// ë‹«ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸ ì—°ê²°
document.getElementById('modal-close').onclick = function () {
  document.getElementById('modal').style.display = 'none';
};

// ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
window.onclick = function (e) {
  const modal = document.getElementById('modal');
  if (e.target === modal) {
    modal.style.display = 'none';
  }
};
</script>
  
  <script type="module" src="./as-order_table.js"></script>
</body>
</html>
